{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/demo-ng.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'MOONRIVER/NG'\n{ rpr\n  inspect\n  echo\n  log     }               = GUY.trm\ntypes                     = new ( require '../../../apps/intertype' ).Intertype()\n{ isa\n  type_of }               = types\n\n\n#===========================================================================================================\n#\n#-----------------------------------------------------------------------------------------------------------\ndemo_1 = ->\n  echo '—————————————————————————————————————————————'\n  { Pipeline } = require '../../../apps/moonriver'\n  on_before_process = -> help '^97-1^', @\n  on_after_process  = -> warn '^97-2^', @\n  on_before_step    =  ( sidx ) -> urge '^97-3^', sidx, @\n  on_after_step     =  ( sidx ) -> urge '^97-4^', sidx, @\n  on_before_step    = null\n  # on_after_step     = null\n  on_after_process  = null\n  p = new Pipeline { on_before_process, on_before_step, on_after_step, on_after_process, }\n  p.push times_2 = ( d, send ) ->\n    if types.isa.float d\n      # send '('\n      send d * 2\n      # send ')'\n    else\n      send d\n  p.push plus_2  = ( d, send ) ->\n    if types.isa.float d\n      # send '['\n      send d + 2\n      # send ']'\n    else\n      send d\n  p.push times_3 = ( d, send ) ->\n    if types.isa.float d\n      # send '{'\n      send d * 3\n      # send '}'\n    else\n      send d\n  p.send 1\n  p.send 2\n  p.send 3\n  # urge '^97-4^', d for d from p.walk()\n  info '^97-4^', p.run()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_2 = ->\n  echo '—————————————————————————————————————————————'\n  { Pipeline } = require '../../../apps/moonriver'\n  on_before_process = null\n  on_before_step    = null\n  on_after_step     = null\n  on_after_process  = null\n  # on_before_process = -> help '^98-1^', @\n  # on_after_process  = -> warn '^98-2^', @\n  # on_before_step    =  ( sidx ) -> urge '^98-3^', sidx, @\n  # on_after_step     =  ( sidx ) -> urge '^98-4^', sidx, @\n  p = new Pipeline { on_before_process, on_before_step, on_after_step, on_after_process, }\n  # p = new Pipeline()\n  # p.push 'AB'\n  # p.push 'CD'\n  # p.push [ 1, 2, 3, ]\n  # p.push [ 4, 5, 6, ]\n  p.push { one: 'cat', two: 'dog', three: 'pony', }\n  p.push new Set '+-*'\n  p.push new Map [ [ 11, 12, ], [ 13, 14, ], ]\n  p.push 'ABC'\n  # p.push 'DEF'\n  # p.push 'GHIJ'\n  # # p.push show_1 = ( d, send ) -> whisper rpr d; send d\n  p.push show_2 = ( d       ) -> whisper rpr d\n  p.send 0\n  p.send 1\n  p.send 2\n  info '^98-5^', p\n  info '^98-6^', p.run()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_3a = ->\n  echo '—————————————————————————————————————————————'\n  { Pipeline\n    Async_pipeline }  = require '../../../apps/moonriver'\n  p = new Async_pipeline()\n  p.push [ 1, 2, 3, ]\n  p.push show_2 = ( d ) -> whisper 'Ⅱ', rpr d\n  p.push mul_3b = ( d, send ) -> send new Promise ( resolve ) -> GUY.async.after 0.1, -> resolve d * 3\n  p.push show_2 = ( d ) -> whisper 'Ⅲ', rpr d\n  info '^23-1^', p\n  info '^23-4^', await p.run()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_3b = ->\n  echo '—————————————————————————————————————————————'\n  { Pipeline\n    Async_pipeline\n    Segment\n    Async_segment } = require '../../../apps/moonriver'\n  after  = ( dts, f  ) => new Promise ( resolve ) -> setTimeout ( -> resolve f() ), dts * 1000\n  p = new Async_pipeline()\n  p.push [ 1, 2, 3, ]\n  p.push show_2 = ( d ) -> whisper 'Ⅱ', rpr d\n  p.push mul_3b = ( d, send ) -> send await after 0.1, -> d * 3\n  p.push show_2 = ( d ) -> whisper 'Ⅲ', rpr d\n  info '^24-7^', p\n  info '^24-8^', await p.run()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_4 = ->\n  echo '—————————————————————————————————————————————'\n  { Pipeline } = require '../../../apps/moonriver'\n  p = new Pipeline()\n  p.push GUY.fs.walk_lines __filename\n  p.push show_2 = ( d ) -> whisper 'Ⅱ', rpr d\n  # p.push show_2 = ( d ) -> whisper 'Ⅲ', rpr d\n  info '^24-7^', p\n  p.run()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_5 = ->\n  echo '—————————————————————————————————————————————'\n  FS                  = require 'node:fs'\n  { Async_pipeline  } = require '../../../apps/moonriver'\n  p = new Async_pipeline()\n  p.push FS.createReadStream __filename\n  p.push show_2 = ( d ) -> whisper 'Ⅱ', rpr d\n  # p.push show_2 = ( d ) -> whisper 'Ⅲ', rpr d\n  info '^24-7^', p\n  await p.run()\n  return null\n\n\n\n############################################################################################################\nif module is require.main then do =>\n  # demo_1()\n  # demo_2()\n  # await demo_3a()\n  # await demo_3b()\n  # demo_4()\n  # demo_5()\n\n  { Receiver }        = require '../../../apps/jfee'\n  SL                  = require '../../../apps/intertext-splitlines'\n  FS                  = require 'node:fs'\n  source = FS.createReadStream __filename, { highWaterMark: 10, } #, { encoding: 'utf-8', }\n  rcv = Receiver.from_readstream source, { bare: true, }\n  ctx = SL.new_context()\n\n  # # source.on 'readable', -> debug '^29-2^', rpr source.read 10\n  # source.on 'data',   ( data ) -> debug '^29-3^', 'data'; debug '^29-4^', rpr data[ .. 100 ]\n  # source.on 'end',    -> debug '^29-5^', 'end';   @has_finished = true\n  # source.on 'close',  -> debug '^29-6^', 'close'; @has_finished = true\n  debug '^29-6^', rcv\n  for await d from rcv\n    debug '^29-6^', '.'\n    for await line from SL.walk_lines ctx, d\n      debug rpr line # .toString()\n  return null\n\n\n"
  ]
}