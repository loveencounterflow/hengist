{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/test-basics.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'MOONRIVER/BASICS'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\ntest                      = require '../../../apps/guy-test'\nPATH                      = require 'path'\n# FS                        = require 'fs'\ntypes                     = new ( require 'intertype' ).Intertype\n{ isa\n  equals\n  type_of\n  validate\n  validate_list_of }      = types.export()\nSQL                       = String.raw\nguy                       = require '../../../apps/guy'\nH                         = require '../../../lib/helpers'\n\n\n  # #.........................................................................................................\n  # probes_and_matchers = [\n  #   ]\n  # #.........................................................................................................\n  # for [ probe, matcher, error, ] in probes_and_matchers\n  #   await T.perform probe, matcher, error, -> return new Promise ( resolve, reject ) ->\n\n\n#-----------------------------------------------------------------------------------------------------------\n@simple = ( T, done ) ->\n  # T?.halt_on_error()\n  { Pipeline } = require '../../../apps/moonriver'\n  #.........................................................................................................\n  do =>\n    collector = []\n    mr        = new Pipeline()\n    mr.push [ 1, 2, 3, 5, ]\n    mr.push ( d, send ) -> send d * 2\n    mr.push ( d, send ) -> send d #; urge d\n    mr.push ( d, send ) -> collector.push d #; help collector\n    mr.run()\n    T?.eq collector, [ 2, 4, 6, 10, ]\n  #.........................................................................................................\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@simple_with_generatorfunction = ( T, done ) ->\n  # T?.halt_on_error()\n  { Pipeline } = require '../../../apps/moonriver'\n  #.........................................................................................................\n  do =>\n    collector = []\n    mr        = new Pipeline()\n    mr.push ( send ) -> yield n for n in [ 1, 2, 3, 5, ]\n    mr.push ( d, send ) -> send d * 2\n    mr.push ( d, send ) -> send d #; urge d\n    mr.push ( d, send ) -> collector.push d #; help collector\n    mr.run()\n    T?.eq collector, [ 2, 4, 6, 10, ]\n  #.........................................................................................................\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@simple_with_generator = ( T, done ) ->\n  # T?.halt_on_error()\n  { Pipeline } = require '../../../apps/moonriver'\n  #.........................................................................................................\n  do =>\n    collector = []\n    mr        = new Pipeline()\n    mr.push ( ( send ) -> yield n for n in [ 1, 2, 3, 5, ] )()\n    mr.push ( d, send ) -> send d * 2\n    mr.push ( d, send ) -> send d #; urge d\n    mr.push ( d, send ) -> collector.push d #; help collector\n    mr.run()\n    T?.eq collector, [ 2, 4, 6, 10, ]\n  #.........................................................................................................\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"can access pipeline from within transform, get user area\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  { Pipeline } = require '../../../apps/moonriver'\n  #.........................................................................................................\n  do =>\n    collector = []\n    pipeline  = [\n      [ '^4564^', ]\n      ( d ) -> urge d\n      #.....................................................................................................\n      can_access_pipeline_1 = ( d ) ->\n        if @ is mr then T?.ok true\n        else            T?.fail \"^478-1^ not ok\"\n        return null\n      #.....................................................................................................\n      can_access_pipeline_2 = ( d, send ) ->\n        send d\n        if @ is mr then T?.ok true\n        else            T?.fail \"^478-2^ not ok\"\n        return null\n      #.....................................................................................................\n      has_user_area = ( d, send ) ->\n        send d\n        if isa.object @user then  T?.ok true\n        else                      T?.fail \"^478-3^ not ok\"\n        return null\n      #.....................................................................................................\n      ]\n    mr = new Pipeline pipeline\n    debug '^558^', mr\n    mr.run()\n    # T?.eq collector, [ 2, 4, 6, 10, ]\n  #.........................................................................................................\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@can_use_asyncgenerator_as_source = ( T, done ) ->\n  # T?.halt_on_error()\n  GUY                 = require '../../../apps/guy'\n  { Async_pipeline }  = require '../../../apps/moonriver'\n  count               = 0\n  source              = -> await yield d for d in [ 3, 5, 7, 11, ]\n  debug '^49-1^', source\n  debug '^49-1^', source()\n  debug '^49-1^', source().next\n  #.......................................................................................................\n  p = new Async_pipeline()\n  p.push source()\n  p.push square = ( d, send ) -> send d * d\n  p.push show = ( d ) -> urge '^49-1^', d\n  #.........................................................................................................\n  result = await p.run()\n  info '^49-1^', result\n  T?.eq result, [ 9, 25, 49, 121, ]\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@can_use_asyncgeneratorfunction_as_source = ( T, done ) ->\n  # T?.halt_on_error()\n  GUY                 = require '../../../apps/guy'\n  { Async_pipeline }  = require '../../../apps/moonriver'\n  count               = 0\n  source              = -> await yield d for d in [ 3, 5, 7, 11, ]\n  debug '^49-1^', source\n  debug '^49-1^', source()\n  debug '^49-1^', source().next\n  #.......................................................................................................\n  p = new Async_pipeline()\n  p.push source\n  p.push square = ( d, send ) -> send d * d\n  p.push show = ( d ) -> urge '^49-1^', d\n  #.........................................................................................................\n  result = await p.run()\n  info '^49-1^', result\n  T?.eq result, [ 9, 25, 49, 121, ]\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@can_use_asyncfunction_as_transform = ( T, done ) ->\n  # T?.halt_on_error()\n  GUY               = require '../../../apps/guy'\n  { Async_pipeline\n    $           }   = require '../../../apps/moonriver'\n  after             = ( dts, f  ) => new Promise ( resolve ) -> setTimeout ( -> resolve f() ), dts * 1000\n  count             = 0\n  #.......................................................................................................\n  p = new Async_pipeline()\n  p.push Array.from '覚える'\n  p.push ( d, send ) -> send await after 0.1, -> \"(#{d})\"\n  p.push show = ( d ) -> urge '^49-1^', d\n  #.........................................................................................................\n  result = await p.run()\n  info '^49-1^', result\n  T?.eq result, [ '(覚)', '(え)', '(る)' ]\n  done?()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@can_use_nodejs_readable_stream_as_source = ( T, done ) ->\n  # T?.halt_on_error()\n  GUY                   = require '../../../apps/guy'\n  { Pipeline,           \\\n    Async_pipeline,     \\\n    transforms: TF }    = require '../../../apps/moonriver'\n  FS                    = require 'node:fs'\n  path                  = PATH.join __dirname, '../../../assets/short-proposal.mkts.md'\n  get_source            = -> FS.createReadStream path #, { encoding: 'utf-8', }\n  #.......................................................................................................\n  matcher = do =>\n    count   = 0\n    matcher = []\n    for line from GUY.fs.walk_lines path\n      count++\n      continue if count > 5\n      info count, rpr line\n      matcher.push line\n    return matcher\n  #.......................................................................................................\n  result = await do =>\n    p = new Async_pipeline()\n    debug '^34-2^', p\n    p.push get_source()\n    # p.push 'rtethg'\n    p.push TF.$split_lines()\n    p.push TF.$limit 5\n    p.push show = ( d ) -> urge '^34-3^', rpr d\n    return await p.run()\n  #.........................................................................................................\n  T?.eq result, matcher\n  done?()\n  return null\n\n\n\n############################################################################################################\nif require.main is module then do =>\n  # await @can_use_asyncgenerator_as_source()\n  # await @can_use_asyncgeneratorfunction_as_source()\n  # test @can_use_asyncgenerator_as_source\n  # test @can_use_asyncgeneratorfunction_as_source\n  # @can_use_asyncfunction_as_transform()\n  # test @can_use_asyncfunction_as_transform\n  test @\n\n"
  ]
}