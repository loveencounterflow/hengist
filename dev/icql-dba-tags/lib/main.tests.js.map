{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/main.tests.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'ICQL-DBA-TAGS/TESTS'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\ntest                      = require '../../../apps/guy-test'\nPATH                      = require 'path'\ntypes                     = new ( require 'intertype' ).Intertype\n{ isa\n  type_of\n  validate\n  validate_list_of }      = types.export()\n# { to_width }              = require 'to-width'\non_process_exit           = require 'exit-hook'\nsleep                     = ( dts ) -> new Promise ( done ) => setTimeout done, dts * 1000\nSQL                       = String.raw\njr                        = JSON.stringify\njp                        = JSON.parse\ndba_path                  = '../../../apps/icql-dba'\n{ lets\n  freeze }                = require 'letsfreezethat'\n\n#-----------------------------------------------------------------------------------------------------------\nadd_sql_functions = ( dba ) ->\n\n  #=========================================================================================================\n  R =\n\n    #-------------------------------------------------------------------------------------------------------\n    walk_pattern_matches: ( text, pattern ) ->\n      regex = new RegExp pattern, 'g'\n      while ( match = regex.exec text )?\n        yield [ match[ 0 ], match[ 1 ], ]\n      return null\n\n    #-------------------------------------------------------------------------------------------------------\n    generate_series: ( start, stop, step = null ) ->\n      # stop ?= start\n      debug '^3334^', @\n      step ?= 1\n      n     = start\n      loop\n        break if n > stop\n        # if n %% 2 is 0 then yield [ \"*#{n}*\", ]\n        # else                yield [ n, ]\n        yield [ n, ]\n        n += step\n      return null\n\n  #.........................................................................................................\n  R[ k ] = v.bind R for k, v of R\n  #.........................................................................................................\n  dba.create_table_function\n    name:         'generate_series'\n    columns:      [ 'n', ]\n    parameters:   [ 'start', 'stop', 'step', ]\n    rows:         R.generate_series\n  #.........................................................................................................\n  dba.create_table_function\n    name:         're_matches'\n    columns:      [ 'match', 'capture', ]\n    parameters:   [ 'text', 'pattern', ]\n    rows:         R.walk_pattern_matches\n  #.........................................................................................................\n  return R\n\n\n#===========================================================================================================\nclass Ncr\n  # constructor: ->\n  #---------------------------------------------------------------------------------------------------------\n  parse_multirange_declaration: ( range_declaration ) ->\n    validate.text range_declaration\n    R = []\n    return R if range_declaration is ''\n    for part in range_declaration.split /,\\s+/\n      if ( match = part.match /^(?<lo>.+)\\.\\.(?<hi>.+)/ )?\n        lo  = match.groups.lo.codePointAt 0\n        hi  = match.groups.hi.codePointAt 0\n      else\n        validate.chr part\n        lo = hi = part.codePointAt 0\n      R.push { lo, hi, }\n    return R\nNCR = new Ncr()\n\n\n#===========================================================================================================\n#\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: tags_from_tagexchain\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  #.........................................................................................................\n  probes_and_matchers = [\n    [ [ '+foo',                             ],  { foo: true,          }, ]\n    [ [ '+foo:\"abc\"',                       ],  { foo: 'abc',         }, ]\n    [ [ '+font:\"superset\"',                 ],  { font: 'superset',   }, ]\n    [ [ '+font:\"font1\"',                    ],  { font: 'font1',      }, ]\n    [ [ '+font:\"font1\"',  '+font:\"Arial\"',  ],  { font: 'Arial',      }, ]\n    [ [ '+rounded', '-rounded',             ],  {},                      ]\n    [ [ '+shape/ladder', '+shape/pointy',   ],  { 'shape/ladder': true, 'shape/pointy': true, }, ]\n    ]\n  { Dtags, }  = require '../../../apps/icql-dba-tags'\n  dtags       = new Dtags()\n  for [ probe, matcher, error, ] in probes_and_matchers\n    await T.perform probe, matcher, error, -> new Promise ( resolve ) ->\n      result = dtags.tags_from_tagexchain { tagexchain: probe, }\n      resolve result\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: add_tag with value\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  #.........................................................................................................\n  get_tags = ( dtags ) ->\n    R = []\n    for row from dtags.dba.query \"select * from t_tags;\"\n      # row.value = jp row.value\n      R.push row\n    return R\n  #.........................................................................................................\n  probes_and_matchers = [\n    [ { tag: 'foo',                        },  [ { nr: 1, tag: 'foo',          value: 'false',    } ], ]\n    [ { tag: 'foo', value: 'abc',          },  [ { nr: 1, tag: 'foo',          value: '\"abc\"',   } ], ]\n    [ { tag: 'font', value: 'font1',       },  [ { nr: 1, tag: 'font',         value: '\"font1\"', } ], ]\n    [ { tag: 'rounded', value: false,      },  [ { nr: 1, tag: 'rounded',      value: 'false',   } ], ]\n    [ { tag: 'shape/ladder',               },  [ { nr: 1, tag: 'shape/ladder', value: 'false',    } ], ]\n    ]\n  { Dtags, }  = require '../../../apps/icql-dba-tags'\n  for [ probe, matcher, error, ] in probes_and_matchers\n    await T.perform probe, matcher, error, -> new Promise ( resolve ) ->\n      dtags = new Dtags()\n      dtags.add_tag probe\n      result  = get_tags dtags\n      resolve result\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: parse_tagex\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  #.........................................................................................................\n  probes_and_matchers = [\n    [ { tagex: '+foo',                          },  { mode: '+', tag: 'foo', value: true,    }, ]\n    [ { tagex: '-foo',                          },  { mode: '-', tag: 'foo', value: false,    }, ]\n    [ { tagex: '+shape/excentricity:0.2',       },  { mode: '+', tag: 'shape/excentricity', value: 0.2,    }, ]\n    [ { tagex: '+css/font-family:\"Helvetica\"',  },  { mode: '+', tag: 'css/font-family', value: 'Helvetica',    }, ]\n    [ { tagex: '-css/font-family:\"Helvetica\"',  },  null, \"Dtags_subtractive_value\", ]\n    [ { tagex: '*bar',                          },  null, \"Dtags_invalid_tagex\", ]\n    [ { tagex: '+bar:blah',                     },  null, \"Dtags_illegal_tagex_value_literal\", ]\n    ]\n  { Dtags, }  = require '../../../apps/icql-dba-tags'\n  dtags       = new Dtags()\n  for [ probe, matcher, error, ] in probes_and_matchers\n    await T.perform probe, matcher, error, -> new Promise ( resolve ) ->\n      result = dtags.parse_tagex probe\n      resolve result\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: fallbacks\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  { Dtags, }  = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  add_some_tags_and_ranges = ( dtags ) ->\n    dtags.add_tag { tag: 'foo', value: true, }\n    dtags.add_tag { tag: 'bar', value: false, }\n    dtags.add_tag { tag: 'baz', value: 42, }\n    dtags.add_tagged_range { lo: 10, hi: 10, tag: 'foo', }\n    dtags.add_tagged_range { lo: 11, hi: 11, mode: '-', tag: 'foo', }\n    dtags.add_tagged_range { lo: 12, hi: 12, tag: 'bar', }\n    dtags.add_tagged_range { lo: 13, hi: 13, mode: '-', tag: 'bar', }\n    dtags.add_tagged_range { lo: 14, hi: 14, tag: 'baz', value: 108, }\n    dtags.add_tagged_range { lo: 15, hi: 15, mode: '-', tag: 'baz', }\n    return null\n  do => #...................................................................................................\n    dtags = new Dtags(); add_some_tags_and_ranges dtags\n    T.eq dtags.get_fallbacks(), { foo: true, bar: false, baz: 42 }\n    T.eq dtags.get_filtered_fallbacks(), {}\n    T.eq ( dtags.tags_from_id { id: 10, } ), { foo: true }\n    T.eq ( dtags.tags_from_id { id: 11, } ), {}\n    T.eq ( dtags.tags_from_id { id: 12, } ), { bar: true }\n    T.eq ( dtags.tags_from_id { id: 13, } ), {}\n    T.eq ( dtags.tags_from_id { id: 14, } ), { baz: 108 }\n    T.eq ( dtags.tags_from_id { id: 15, } ), {}\n  do => #...................................................................................................\n    dtags = new Dtags { fallbacks: true, }; add_some_tags_and_ranges dtags\n    T.eq dtags.get_fallbacks(), { foo: true, bar: false, baz: 42 }\n    T.eq dtags.get_filtered_fallbacks(), { foo: true, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 10, } ), { foo: true, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 11, } ), { foo: true, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 12, } ), { foo: true, baz: 42, bar: true }\n    T.eq ( dtags.tags_from_id { id: 13, } ), { foo: true, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 14, } ), { foo: true, baz: 108 }\n    T.eq ( dtags.tags_from_id { id: 15, } ), { foo: true, baz: 42 }\n  do => #...................................................................................................\n    dtags = new Dtags { fallbacks: 'all', }; add_some_tags_and_ranges dtags\n    T.eq dtags.get_fallbacks(), { foo: true, bar: false, baz: 42 }\n    T.eq dtags.get_filtered_fallbacks(), { foo: true, bar: false, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 10, } ), { foo: true, bar: false, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 11, } ), { foo: true, bar: false, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 12, } ), { foo: true, bar: true, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 13, } ), { foo: true, bar: false, baz: 42 }\n    T.eq ( dtags.tags_from_id { id: 14, } ), { foo: true, bar: false, baz: 108 }\n    T.eq ( dtags.tags_from_id { id: 15, } ), { foo: true, bar: false, baz: 42 }\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: add_tagged_range\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  #.........................................................................................................\n  { Dtags, }  = require '../../../apps/icql-dba-tags'\n  prefix        = 't_'\n  #.........................................................................................................\n  get_tagged_ranges = ( dtags ) ->\n    R = []\n    for row from dtags.dba.query SQL\"select * from t_tagged_ranges order by lo, hi, tag;\"\n      row.value = jp row.value\n      R.push row\n    return R\n  #.........................................................................................................\n  probes_and_matchers = [\n    [ { lo: 1, hi: 11,  mode: '+', tag: 'foo',                        },  [ { nr: 1, lo: 1, hi: 11, mode: '+', tag: 'foo', value: true, } ], ]\n    [ { lo: 2, hi: 12,  mode: '+', tag: 'foo', value: 'abc',          },  [ { nr: 1, lo: 2, hi: 12, mode: '+', tag: 'foo', value: 'abc', } ], ]\n    [ { lo: 5, hi: 15,  mode: '+', tag: 'font', value: 'font1',       },  [ { nr: 1, lo: 5, hi: 15, mode: '+', tag: 'font', value: 'font1', } ], ]\n    [ { lo: 6, hi: 16,  mode: '-', tag: 'rounded',                    },  [ { nr: 1, lo: 6, hi: 16, mode: '-', tag: 'rounded', value: false, } ],                      ]\n    [ { lo: 7, hi: 17,  mode: '+', tag: 'shape/ladder',               },  [ { nr: 1, lo: 7, hi: 17, mode: '+', tag: 'shape/ladder', value: true, } ],                      ]\n    ]\n  dtags       = new Dtags()\n  for [ probe, matcher, error, ] in probes_and_matchers\n    await T.perform probe, matcher, error, -> new Promise ( resolve ) ->\n      dtags   = new Dtags { prefix, }\n      dtags.add_tag probe\n      dtags.add_tagged_range probe\n      result  = get_tagged_ranges dtags\n      resolve result\n  #.........................................................................................................\n  done()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: caching (1)\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  #.........................................................................................................\n  { Dba }           = require '../../../apps/icql-dba'\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  # E                 = require '../../../apps/icql-dba/lib/errors'\n  prefix            = 't_'\n  dba               = new Dba()\n  dtags             = new Dtags { dba, prefix, }\n  #.........................................................................................................\n  get_tagged_ranges = -> dba.list dba.query SQL\"select * from t_tagged_ranges order by nr;\"\n  get_cache         = -> dba.list dba.query SQL\"select * from t_tagged_ids_cache order by id;\"\n  # get_tagchain      = ( id ) -> dba.list dba.query SQL\"\"\"\n  #   select mode, tag, value from t_tagged_ranges where $id between lo and hi order by nr asc;\"\"\", { id, }\n  #.........................................................................................................\n  do =>\n    dtags.add_tag { tag: 'first', }\n    dtags.add_tag { tag: 'second', }\n    dtags.add_tagged_range { mode: '+', lo: 10, hi: 20, tag: 'first',  }\n    dtags.add_tagged_range { mode: '+', lo: 10, hi: 15, tag: 'second', }\n    dtags.add_tagged_range { mode: '-', lo: 12, hi: 12, tag: 'second', }\n    T.eq get_cache(), []\n    T.eq get_tagged_ranges(), [\n      { nr: 1, lo: 10, hi: 20, mode: '+', tag: 'first', value: 'true' },\n      { nr: 2, lo: 10, hi: 15, mode: '+', tag: 'second', value: 'true' },\n      { nr: 3, lo: 12, hi: 12, mode: '-', tag: 'second', value: 'false' } ]\n    T.eq ( dtags.tagchain_from_id { id: 10, } ), [\n      { nr: 1, mode: '+', tag: 'first', value: true },\n      { nr: 2, mode: '+', tag: 'second', value: true }, ]\n    T.eq ( dtags.tagchain_from_id { id: 12, } ), [\n      { nr: 1, mode: '+', tag: 'first', value: true },\n      { nr: 2, mode: '+', tag: 'second', value: true },\n      { nr: 3, mode: '-', tag: 'second', value: false } ]\n    T.eq ( dtags.tagchain_from_id { id: 16, } ), [\n      { nr: 1, mode: '+', tag: 'first', value: true } ]\n    T.eq get_cache(), []\n    T.eq ( dtags.tags_from_id { id: 10, } ), { first: true, second: true }\n    T.eq ( dtags.tags_from_id { id: 12, } ), { first: true, }\n    T.eq ( dtags.tags_from_id { id: 16, } ), { first: true }\n    T.eq get_cache(), [\n      { id: 10, tags: '{\"first\":true,\"second\":true}' },\n      { id: 12, tags: '{\"first\":true}' },\n      { id: 16, tags: '{\"first\":true}' } ]\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"tags: caching with empty values\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  #.........................................................................................................\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  prefix            = 't_'\n  dtags             = new Dtags { prefix, fallbacks: true, }\n  #.........................................................................................................\n  get_tagged_ranges = -> dtags.dba.list dtags.dba.query SQL\"select * from t_tagged_ranges order by nr;\"\n  get_cache         = -> dtags.dba.list dtags.dba.query SQL\"select * from t_tagged_ids_cache order by id;\"\n  # get_tagchain      = ( id ) -> dba.list dba.query SQL\"\"\"\n  #   select mode, tag, value from t_tagged_ranges where $id between lo and hi order by nr asc;\"\"\", { id, }\n  #.........................................................................................................\n  do =>\n    dtags.add_tag { tag: 'first', }\n    dtags.add_tagged_range { mode: '+', lo: 10, hi: 10, tag: 'first',  }\n    T.eq get_cache(), []\n    T.eq get_tagged_ranges(), [\n      { nr: 1, lo: 10, hi: 10, mode: '+', tag: 'first', value: 'true' }, ]\n    T.eq ( dtags.tagchain_from_id { id: 10, } ), [\n      { nr: 1, mode: '+', tag: 'first', value: true }, ]\n    T.eq ( dtags.tagchain_from_id { id: 11, } ), []\n    T.eq get_cache(), []\n    T.eq ( dtags.tags_from_id { id: 10, } ), { first: true, }\n    T.eq ( dtags.tags_from_id { id: 11, } ), {}\n    T.eq get_cache(), [\n      { id: 10, tags: '{\"first\":true}' },\n      { id: 11, tags: '{}' }, ]\n    console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tagged_ids_cache order by id;\"\"\"\n    console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tagged_ranges order by lo, hi, nr;\"\"\"\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n_add_tagged_ranges = ( dtags ) ->\n  rules = [\n    # [ '+superset',      'A..Z',               ]\n    # [ '+font:\"fallback\"', 'A..Z',               ]\n    # [ '+script:\"latin\"',  'A..Z',               ]\n    [ '+font:\"font1\"',                  'B..H, J, L, N..X',   ]\n    [ '+font:\"font2\"',                  'B..D',               ]\n    [ '+font:\"font3\"',                  'G..I',               ]\n    [ '+font:\"font4\"',                  'M..Q',               ]\n    [ '+font:\"font5\"',                  'M, O..T',            ]\n    [ '+font:\"font6\"',                  'M, U, X..X',         ]\n    [ '+vowel',                         'A, E, I, O, U',      ]\n    [ '+shape-pointy',                  'A, V',               ]\n    [ '+shape-crossed',                 'X',                  ]\n    [ '+shape-ladder',                  'A, H',               ]\n    [ '+pushraise:{\"x\":100,\"y\":200}',   'O',                  ]\n    ]\n  seen_tags = new Set()\n  seen_tags.add 'font';       dtags.add_tag { tag: 'font', value: 'fallback', }\n  seen_tags.add 'pushraise';  dtags.add_tag { tag: 'pushraise', value: false, }\n  for [ tagex, ranges, ] in rules\n    { mode, tag, value, } = dtags.parse_tagex { tagex, }\n    unless seen_tags.has tag\n      seen_tags.add tag\n      dtags.add_tag { tag, value: ( if value is true then false else value ), }\n    for { lo, hi, } in NCR.parse_multirange_declaration ranges\n      dtags.add_tagged_range { mode, tag, value, lo, hi, }\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: ranges (1)\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  f = ( fallbacks ) ->\n    prefix            = 't_'\n    dtags             = new Dtags { prefix, fallbacks, }\n    cid_from_chr      = ( chr ) -> chr.codePointAt 0\n    chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n    dtags.dba.create_function name: 'chr_from_cid', call: chr_from_cid\n    first_cid         = cid_from_chr 'A'\n    last_cid          = cid_from_chr 'Z'\n    #.......................................................................................................\n    _add_tagged_ranges dtags\n    #.......................................................................................................\n    console.table dtags.dba.list dtags.dba.query SQL\"\"\"\n      select\n          nr                      as nr,\n          chr_from_cid( lo )      as chr_lo,\n          chr_from_cid( hi )      as chr_hi,\n          mode                    as mode,\n          tag                     as tag,\n          value                   as value\n        from #{prefix}tagged_ranges\n        order by nr;\"\"\"\n    console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tags order by tag;\"\"\"\n    # console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tags_by_cid order by tag, cid, nr;\"\"\"\n    #.......................................................................................................\n    for cid in [ first_cid .. last_cid ]\n      chr       = String.fromCodePoint cid\n      tags      = dtags.tags_from_id { id: cid, }\n      info ( CND.gold chr ), ( CND.blue tags )\n    console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tagged_ids_cache order by id;\"\"\"\n    # console.table dtags.dba.list dtags.dba.query SQL\"\"\"select * from #{prefix}tagged_ranges order by lo, hi, nr;\"\"\"\n  #.........................................................................................................\n  for fallbacks in [ 'all', true, false, ]\n    f fallbacks\n  done?() #.................................................................................................\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: contiguous ranges\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  prefix            = 't_'\n  dtags             = new Dtags { prefix, fallbacks: true, }\n  { dba, }          = dtags\n  cid_from_chr      = ( chr ) -> chr.codePointAt 0\n  chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n  #.........................................................................................................\n  _add_tagged_ranges dtags\n  dtags.add_tagged_range { lo: dtags.cfg.first_id, hi: dtags.cfg.last_id, tag: 'font', value: 'font1', }\n  #.........................................................................................................\n  console.table dba.list dba.query SQL\"select * from #{prefix}_potential_inflection_points order by id;\"\n  dtags._create_minimal_contiguous_ranges()\n  console.table dba.list dba.query SQL\"select * from #{prefix}contiguous_ranges order by lo;\"\n  T?.eq ( dba.first_row dba.query SQL\"select * from #{prefix}contiguous_ranges where lo = 0 order by lo;\" ), { lo: 0, hi: 64, tags: '{\"font\":\"font1\"}' }\n  T?.eq ( dba.first_row dba.query SQL\"select * from #{prefix}contiguous_ranges where lo = 89 order by lo;\" ), { lo: 89, hi: 1114111, tags: '{\"font\":\"font1\"}' }\n  T?.eq ( dtags.tags_from_id { id: 10, }                   ), { font: 'font1' }\n  T?.eq ( dtags.tags_from_id { id: 65, }                   ), { font: 'font1', vowel: true, 'shape-pointy': true, 'shape-ladder': true }\n  T?.eq ( dtags.tags_from_id { id: ( cid_from_chr 'X' ), } ), { font: 'font1', 'shape-crossed': true }\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: validate contiguous ranges\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  prefix            = 't_'\n  dtags             = new Dtags { prefix, fallbacks: true, }\n  { dba, }          = dtags\n  cid_from_chr      = ( chr ) -> chr.codePointAt 0\n  chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n  #.........................................................................................................\n  _add_tagged_ranges dtags\n  dtags.add_tagged_range { lo: dtags.cfg.first_id, hi: dtags.cfg.last_id, tag: 'font', value: 'font1', }\n  dtags._create_minimal_contiguous_ranges()\n  #.........................................................................................................\n  rows = dba.list dba.query SQL\"select * from t_contiguous_ranges where lo = ?;\", [ dtags.cfg.first_id, ]\n  T?.eq rows.length, 1\n  #.........................................................................................................\n  rows = dba.list dba.query SQL\"select * from t_contiguous_ranges where hi = ?;\", [ dtags.cfg.last_id, ]\n  T?.eq rows.length, 1\n  #.........................................................................................................\n  prv_hi = null\n  for row from dtags.dba.query SQL\"select * from t_contiguous_ranges order by lo;\"\n    info '^4333^', row\n    T.ok row.lo <= row.hi\n    T.eq row.lo, prv_hi + 1 if prv_hi?\n    prv_hi = row.hi\n  #.........................................................................................................\n  for id in [ 0 .. 100 ]\n    rows  = dba.list dba.query SQL\"select * from t_contiguous_ranges where ? between lo and hi;\", [ id, ]\n    T?.eq rows.length, 1\n  #.........................................................................................................\n  for n in [ 1 .. 10 ]\n    id    = ( CND.random_integer dtags.cfg.first_id, dtags.cfg.last_id + 1 )\n    rows  = dba.list dba.query SQL\"select * from t_contiguous_ranges where ? between lo and hi;\", [ id, ]\n    T?.eq rows.length, 1\n  #.........................................................................................................\n  done?() #.................................................................................................\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: split text along ranges (demo)\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  prefix            = 't_'\n  dtags             = new Dtags { prefix, fallbacks: true, }\n  { dba, }          = dtags\n  cid_from_chr      = ( chr ) -> chr.codePointAt 0\n  chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n  to_hex            = ( cid ) -> '0x' + cid.toString 16\n  dtags.dba.create_function name: 'to_hex', call: to_hex\n  dtags.dba.create_function name: 'chr_from_cid', call: chr_from_cid\n  #.........................................................................................................\n  _add_tagged_ranges dtags\n  dtags.add_tagged_range { lo: dtags.cfg.first_id, hi: dtags.cfg.last_id, tag: 'font', value: 'font1', }\n  dtags._create_minimal_contiguous_ranges()\n  console.table dba.list dba.query SQL\"\"\"select\n      to_hex( lo )          as lo,\n      to_hex( hi )          as hi,\n      chr_from_cid( lo )    as loc,\n      chr_from_cid( hi )    as hic,\n      tags\n    from #{prefix}contiguous_ranges\n    order by lo;\"\"\"\n  #.........................................................................................................\n  do ->\n    ### Demo for a regex that partitons a text into chunks of characters that all have the same tags. ###\n    debug 'abcdefgh'.match /(?<vowels>[aeiou])/g\n    text = 'arbitrary text'\n    re = ///\n      (?<g1> [ a - d ]+ \\s* ) |\n      (?<g2> [ e - h ]+ \\s* ) |\n      (?<g3> [ i - n ]+ \\s* ) |\n      (?<g4> [ o - t ]+ \\s* ) |\n      (?<g5> [ u - z ]+ \\s* ) |\n      (?<g0> \\s+ )\n      ///g\n    #.......................................................................................................\n    R = []\n    for match in [ ( text.matchAll re )..., ]\n      { groups, } = match\n      for group, part of match.groups\n        continue unless part?\n        R.push { group, part, }\n        break\n    for group, part of R\n      info group, rpr part\n  #.........................................................................................................\n  do ->\n    ### Build regex to split text from actual table contents ###\n    dtags._hex_re_from_contiguous_ranges = ->\n      ### TAINT make addition of spaces configurable, e.g. as `all_groups_extra: '\\\\s'`  ###\n      ranges = []\n      for row from dtags.dba.query SQL\"select * from #{prefix}contiguous_ranges order by lo;\"\n        lo = \"\\\\u{#{row.lo.toString 16}}\"\n        if row.lo is row.hi\n          ranges.push \"(?<g#{row.lo}>[#{lo}]+)\"\n        else\n          hi = \"\\\\u{#{row.hi.toString 16}}\"\n          ranges.push \"(?<g#{row.lo}>[#{lo}-#{hi}]+)\"\n      ranges  = ranges.join '|'\n      return new RegExp \"#{ranges}\", 'gu'\n    #.......................................................................................................\n    whisper '-'.repeat 108\n    text  = \"ARBITRARY TEXT\"\n    text  = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n    re    = dtags._hex_re_from_contiguous_ranges()\n    debug '^33436^', re\n    # re = /(?<g0>[\\u{0000}-\\u{0040}]+s*)|(?<g65>\\u{0041}+s*)|(?<g66>[\\u{0042}-\\u{0044}]+s*)/gu\n    # re = /([\\u{0000}-\\u{0040}]\\s*)/gu\n    # re = /(?<g777>[a-z]+)/gu\n    debug '^33436^', re\n    f = ( re, text ) ->\n      R     = []\n      idx   = 0\n      debug text.length\n      for match from text.matchAll re\n        for key, value of match.groups\n          break if value?\n        if match.index > idx\n          warn idx, match.index, CND.reverse rpr text[ idx ... match.index ]\n          idx = match.index\n        idx += value.length\n        info match.index, idx, key, rpr value\n      return R\n    f re, text\n  #.........................................................................................................\n  done?() #.................................................................................................\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: split text along ranges\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  #.........................................................................................................\n  prefix            = 't_'\n  dtags             = new Dtags { prefix, fallbacks: true, }\n  { dba, }          = dtags\n  cid_from_chr      = ( chr ) -> chr.codePointAt 0\n  chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n  to_hex            = ( cid ) -> '0x' + cid.toString 16\n  dtags.dba.create_function name: 'to_hex', call: to_hex\n  dtags.dba.create_function name: 'chr_from_cid', call: chr_from_cid\n  #.........................................................................................................\n  _add_tagged_ranges dtags\n  dtags.add_tagged_range { lo: dtags.cfg.first_id, hi: dtags.cfg.last_id, tag: 'font', value: 'font1', }\n  dtags._create_minimal_contiguous_ranges()\n  console.table dba.list dba.query SQL\"\"\"select\n      lo                    as lo,\n      hi                    as hi,\n      to_hex( lo )          as lox,\n      to_hex( hi )          as hix,\n      chr_from_cid( lo )    as loc,\n      chr_from_cid( hi )    as hic,\n      tags\n    from #{prefix}contiguous_ranges\n    order by lo;\"\"\"\n  console.table dba.list dba.query SQL\"select * from #{prefix}tags_and_rangelists;\"\n  #.........................................................................................................\n  do ->\n    # text  = \"ARBITRARY TEXT\"\n    text  = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n    for region in regions = dtags.find_tagged_regions text\n      debug '^33443^', region\n    T?.eq regions, [\n      { key: 'g5', start: 0, stop: 1, part: 'A' }\n      { key: 'g7', start: 1, stop: 4, part: 'BCD' }\n      { key: 'g6', start: 4, stop: 5, part: 'E' }\n      { key: 'g7', start: 5, stop: 7, part: 'FG' }\n      { key: 'g2', start: 7, stop: 8, part: 'H' }\n      { key: 'g6', start: 8, stop: 9, part: 'I' }\n      { key: 'g7', start: 9, stop: 14, part: 'JKLMN' }\n      { key: 'g4', start: 14, stop: 15, part: 'O' }\n      { key: 'g7', start: 15, stop: 20, part: 'PQRST' }\n      { key: 'g6', start: 20, stop: 21, part: 'U' }\n      { key: 'g3', start: 21, stop: 22, part: 'V' }\n      { key: 'g7', start: 22, stop: 23, part: 'W' }\n      { key: 'g1', start: 23, stop: 24, part: 'X' }\n      { key: 'g7', start: 24, stop: 26, part: 'YZ' }\n      ]\n  done?() #.................................................................................................\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBA: tagged text\" ] = ( T, done ) ->\n  T?.halt_on_error()\n  INTERTEXT                 = require '../../../apps/intertext'\n  { Cupofhtml }             = INTERTEXT.CUPOFHTML\n  cupofhtml                 = new Cupofhtml()\n  { tag: _tag\n    S\n    H   }                   = cupofhtml.export()\n  #.........................................................................................................\n  { Dtags, }        = require '../../../apps/icql-dba-tags'\n  fallbacks         = 'all'\n  dtags             = new Dtags { fallbacks, }\n  cid_from_chr      = ( chr ) -> chr.codePointAt 0\n  chr_from_cid      = ( cid ) -> String.fromCodePoint cid\n  # dtags.dba.create_function name: 'chr_from_cid', call: chr_from_cid\n  # dtags.dba.create_function name: 'cid_from_chr', call: cid_from_chr\n  _add_tagged_ranges dtags\n  #.........................................................................................................\n  text  = \"lore ipsum\"\n  text  = text.toUpperCase()\n  chrs  = Array.from text\n  #.........................................................................................................\n  is_open = {}\n  stack   = []\n  #.........................................................................................................\n  dtag_as_html_tag = ( tag, value ) ->\n    switch ( type = type_of value )\n      when 'object'\n        urge '^77464^', INTERTEXT.CUPOFHTML._html_from_datom {}, { $key: '<foo', bar: 42, }\n        urge '^77464^', INTERTEXT.CUPOFHTML._html_from_datom {}, { $key: '^foo', bar: 42, }\n        urge '^77464^', INTERTEXT.CUPOFHTML._html_from_datom {}, { $key: '>foo', bar: 42, }\n        urge '^77464^', INTERTEXT.CUPOFHTML._html_from_datom {}, 'foo<bar>'\n        _tag 'mytag', value, '\\x00'\n        R                   = cupofhtml.as_html()\n        [ opener, closer, ] = R.split '\\x00'\n        return opener\n      else\n        return \"<#{tag} class='#{value}'>\"\n  #.........................................................................................................\n  prefill_stack = ->\n    for tag, value of dtags.get_fallbacks()\n      stack.push { tag, value, }\n      yield dtag_as_html_tag tag, value\n    return null\n  for html_tag from prefill_stack()\n    debug '^5576^', html_tag\n  whisper '^545^', stack\n  # return done?()\n  #.........................................................................................................\n  for chr in chrs\n    id    = cid_from_chr chr\n    tags  = dtags.tags_from_id { id, }\n    whisper '^777^', chr, tags\n    for tag, value of tags\n      info '^44476^', { tag, value, }\n      continue unless tag in [ 'font', 'vowel', ]\n      if ( is_open[ tag ] ?= false )\n        do flush = ->\n          loop\n            top_tag = stack.pop()\n            urge '^777^', \"</#{top_tag}>\"\n            is_open[ top_tag ] = false\n            break if tag is top_tag\n          return null\n      debug '^777^', chr\n      is_open[ tag ] = true\n      info '^777^', \"<#{tag} class='#{value}'>\"\n      stack.push tag\n      whisper '^777^', stack\n  #.........................................................................................................\n  done?() #.................................................................................................\n\n\n#-----------------------------------------------------------------------------------------------------------\ndemo_html = ->\n  INTERTEXT                 = require '../../../apps/intertext'\n  { Cupofhtml }             = INTERTEXT.CUPOFHTML\n  cupofhtml                 = new Cupofhtml()\n  { cram\n    expand\n    tag\n    S\n    H   }                   = cupofhtml.export()\n  { datoms_from_html\n    html_from_datoms }      = INTERTEXT.HTML.export()\n  #.........................................................................................................\n  H.p ->\n    S.text  \"An interesting \"\n    tag     'em', \"fact\"\n    S.text  \" about CupOfJoe is that you \"\n    tag     'em', { foo: 'bar', }, -> S.text \"can\"\n    tag     'strong', \" nest\", \" with both sequences\", \" and function calls.\"\n  #.........................................................................................................\n  html   = cupofhtml.as_html()\n  info cupofhtml.last_expansion\n  urge '\\n' + html\n  #.........................................................................................................\n  H.p \"another paragraph\"\n  debug cupofhtml.as_html()\n  #.........................................................................................................\n  tag 'p', { guess: 'what', }, ->\n    S.text \"yet another paragraph\"\n    tag 'foobar', { atr: 'value with spaces', }, \"yay\"\n  debug cupofhtml.as_html()\n  #.........................................................................................................\n  return null\n\nregex_demo = ->\n  text  = \" abcdab cfgbbzabc  z\"\n  # re    = dtags._hex_re_from_contiguous_ranges()\n  # debug '^33436^', re\n  # re = /(?<g0>[\\u{0000}-\\u{0040}]+s*)|(?<g65>\\u{0041}+s*)|(?<g66>[\\u{0042}-\\u{0044}]+s*)/gu\n  # re = /([\\u{0000}-\\u{0040}]\\s*)/gu\n  ### Version with trailing spaces becoming part of preceding group; `<g0>` only used for leading space\n  and space after unmatched characters (hich should never happen) ###\n  re = ///\n    (?<g0> [ \\s ]+ ) |\n    (?<g1> [ \\u{61} - \\u{65} \\s ]+ ) |\n    (?<g2> [ \\u{66} - \\u{7a} \\s ]+ )\n    ///gu\n  ### ... but we prefer to not special-case whitespace to avoid spaces to be treated like a preceding\n  special-cased glyf (which might get scaled, translated and so on); `<g3>` is now an ordinary group\n  without any overlaps: ###\n  re = ///\n    (?<g1> [ \\u{61} - \\u{65} ]+ ) |\n    (?<g2> [ \\u{66} - \\u{7a} ]+ ) |\n    (?<g3> [ \\s ]+ )\n    ///gu\n  debug '^33436^', re\n  R     = []\n  idx   = 0\n  debug text.length\n  for match from text.matchAll re\n    for key, value of match.groups\n      break if value?\n    if match.index > idx\n      warn idx, match.index, CND.reverse rpr text[ idx ... match.index ]\n      idx = match.index\n    idx += value.length\n    info match.index, idx, key, rpr value\n  return null\n\n\n############################################################################################################\nif module is require.main then do =>\n  # test @, { timeout: 10e3, }\n  # test @[ \"DBA: ranges (1)\" ]\n  # test @[ \"DBA: contiguous ranges\" ]\n  # test @[ \"DBA: validate contiguous ranges\" ]\n  # test @[ \"DBA: split text along ranges (demo)\" ]\n  test @[ \"DBA: split text along ranges\" ]\n  # @[ \"DBA: split text along ranges\" ]()\n  # regex_demo()\n  # @[ \"DBA: contiguous ranges\" ]()\n  # test @[ \"tags: caching with empty values\" ]\n  # test @[ \"tags: tags_from_tagexchain\" ]\n  # test @[ \"tags: add_tagged_range\" ]\n  # test @[ \"tags: add_tag with value\" ]\n  # test @[ \"tags: parse_tagex\" ]\n  # @[ \"DBA: ranges (1)\" ]()\n  # test @[ \"tags: caching (1)\" ]\n  # test @[ \"tags: fallbacks\" ]\n  # @[ \"tags: fallbacks\" ]()\n  # @[ \"DBA: tagged text\" ]()\n  # demo_html()\n\n\n\n\n###\n# from https://github.com/loveencounterflow/hengist/tree/master/dev/kitty-font-config-writer-kfcw\n\nsuperset          ABCDEFGHIJKLMNOPQRSTUVWXYZ   CSS-like Configuration with Overlapping Ranges\n   \nfont1             BCDEFGH J L NOPQRSTUVWX     [B-H] [J] [L] [N-X]                       least precedence\nfont2             BCD                         [B-D]                                    \nfont3                  GHI                    [G-I]                                    \nfont4                        MNOPQ            [M-Q]                                    \nfont5                        M OPQRST         [M] [O-T]                                \nfont6                        M       U  XY    [M] [U] [X-Y]                             most precedence\n###\n\n\n\n\n"
  ]
}