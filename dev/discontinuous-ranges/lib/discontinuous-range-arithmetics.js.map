{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "/home/flow/jzr/hengist/dev/discontinuous-ranges/src/discontinuous-range-arithmetics.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n############################################################################################################\nCND                       = require 'cnd'\nbadge                     = 'DISCONTINUOUS-RANGE-ARITHMETICS'\nrpr                       = CND.rpr\nlog                       = CND.get_logger 'plain',     badge\ninfo                      = CND.get_logger 'info',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\nalert                     = CND.get_logger 'alert',     badge\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\nhelp                      = CND.get_logger 'help',      badge\nurge                      = CND.get_logger 'urge',      badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\nPATH                      = require 'path'\nhex                       = ( n ) -> ( n.toString 16 ).toUpperCase().padStart 4, '0'\nDRange                    = require 'drange'\nmerge_ranges              = require 'merge-ranges'\n#...........................................................................................................\n@types                    = new ( require 'intertype' ).Intertype()\n{ isa\n  validate\n  declare\n  cast\n  type_of }               = @types.export()\nLFT                       = require 'letsfreezethat'\n# { lets\n#   freeze }                = LFT\nfreeze                    = Object.freeze\n\n\n#===========================================================================================================\n# TYPES\n#-----------------------------------------------------------------------------------------------------------\ndeclare 'urange_instance',  ( x ) -> x instanceof Urange\ndeclare 'arange_instance',  ( x ) -> x instanceof Arange\n\n#-----------------------------------------------------------------------------------------------------------\ndeclare 'urange_segment', tests:\n  \"must be a list\":                                         ( x ) -> @isa.list x\n  \"length must be 2\":                                       ( x ) -> x.length is 2\n  \"lo boundary must be an infnumber\":                       ( x ) -> isa.infnumber x[ 0 ]\n  \"lo boundary must be an infnumber\":                       ( x ) -> isa.infnumber x[ 1 ]\n  \"lo boundary must be less than or equal to hi boundary\":  ( x ) -> x[ 0 ] <= x[ 1 ]\n\n\n#===========================================================================================================\n# OOP\n#-----------------------------------------------------------------------------------------------------------\nclass Urange\n  ### TAINT add type checking to avoid silent failure of e.g. `new DRange [ 1, 3, ]` ###\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( P... ) ->\n    @d = new DRange()\n    # @d = ( require 'letsfreezethat' ).freeze new DRange()\n    for p in P\n      if isa.urange_instance p\n        @d.add p.d\n      else\n        validate.urange_segment p\n        @d.add p...\n    Object.defineProperty @, 'length', get: -> @d.length\n    return @\n\n  #---------------------------------------------------------------------------------------------------------\n  union: ( other ) ->\n    other = ( new Urange other ) unless isa.urange_instance other\n    @d.add other.d\n    return @\n\n  #---------------------------------------------------------------------------------------------------------\n  difference: ( other ) ->\n    other = ( new Urange other ) unless isa.urange_instance other\n    @d.subtract other.d\n    return @\n\n  #---------------------------------------------------------------------------------------------------------\n  as_lists: -> ( [ r.low, r.high, ] for r in @d.ranges )\n\n@Urange = Urange\n\n\n#===========================================================================================================\n# FUN\n#-----------------------------------------------------------------------------------------------------------\nclass Segment extends Array\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( lohi ) ->\n    validate.urange_segment lohi if lohi\n    super lohi[ 0 ], lohi[ 1 ]\n    Object.defineProperty @, 'size',  get: @_size_of\n    Object.defineProperty @, 'lo',    get: -> @[ 0 ]\n    Object.defineProperty @, 'hi',    get: -> @[ 1 ]\n    return freeze @\n\n  #---------------------------------------------------------------------------------------------------------\n  _size_of:           -> @[ 1 ] - @[ 0 ] + 1\n  @from:    ( P...  ) -> new Segment P...\n\n#-----------------------------------------------------------------------------------------------------------\nclass Arange  extends Array\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( P... ) ->\n    super P...\n    Object.defineProperty @, 'size', get: @_size_of\n    Object.defineProperty @, 'lo',    get: -> @first?[ 0      ] ? null\n    Object.defineProperty @, 'hi',    get: -> @last?[  1      ] ? null\n    Object.defineProperty @, 'first', get: -> @[ 0            ] ? null\n    Object.defineProperty @, 'last',  get: -> @[ @length - 1  ] ? null\n    # return freeze @\n    return @\n\n  #---------------------------------------------------------------------------------------------------------\n  _size_of:           -> @reduce ( ( sum, segment ) -> sum + segment.size ), 0\n  # @from:    ( P...  ) -> new Arange P...\n\n# npm install @scotttrinh/number-ranges\n# drange-immutable\n\n#-----------------------------------------------------------------------------------------------------------\n@Arange   = Arange\n@Segment  = Segment\n\n#-----------------------------------------------------------------------------------------------------------\n@new_segment = ( lo, hi ) -> new Segment lo, hi\n\n#-----------------------------------------------------------------------------------------------------------\n@new_arange = ( P... ) ->\n  R = new DRange()\n  # R = ( require 'letsfreezethat' ).freeze new DRange()\n  P = [ P[ 0 ]..., ] if P.length is 1 and isa.generator P[ 0 ]\n  # debug '^675^', P\n  for p in P\n    validate.urange_segment p unless p instanceof Segment\n    R.add p...\n  return @_drange_as_arange R\n\n#-----------------------------------------------------------------------------------------------------------\n@union = ( me, other ) ->\n  me = Arange.from me unless me instanceof Arange\n  validate.urange_segment other unless other instanceof Arange\n  R = new DRange()\n  R = R.add segment... for segment in me\n  R = R.add other...\n  return @_drange_as_arange R\n\n#-----------------------------------------------------------------------------------------------------------\n@_drange_as_arange  = ( drange ) ->\n  return freeze @_sort Arange.from ( ( new Segment [ r.low, r.high, ] ) for r in drange.ranges )\n\n#-----------------------------------------------------------------------------------------------------------\n@_sort              = ( arange ) -> arange.sort ( a, b ) ->\n  return -1 if a[ 0 ] < b[ 0 ]\n  return +1 if a[ 0 ] > b[ 0 ]\n  return -1 if a[ 1 ] < b[ 1 ]\n  return +1 if a[ 1 ] > b[ 1 ]\n  return  0\n\n\n\n\n#===========================================================================================================\n# OTHER\n#-----------------------------------------------------------------------------------------------------------\n@ranges_from_drange   = ( drange ) -> ( [ r.low, r.high, ] for r in drange.ranges )\n@ranges_from_urange   = ( urange ) -> validate.urange_instance urange; return @ranges_from_drange urange.d\n@numbers_from_drange  = ( drange ) -> ( ( drange.index i ) for i in [ 0 ... drange.length ] )\n@numbers_from_urange  = ( urange ) -> validate.urange_instance urange; return @numbers_from_drange urange.d\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_subtract_ranges_DRange = ->\n  super_rng   = new DRange 1, 100\n  blue_rng    = new DRange 13\n  blue_rng    = blue_rng.add 8\n  blue_rng    = blue_rng.add 60, 80 # [8, 13, 60-80]\n  blue_rng    = blue_rng.add 81\n  blue_rng    = blue_rng.add new DRange 27, 55\n  help '^3332^', @ranges_from_drange blue_rng\n  red_rng     = super_rng.clone().subtract blue_rng\n  help '^556^', @ranges_from_drange red_rng\n  help '^556^', red_rng.length\n  info '^334^', @numbers_from_drange red_rng\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_subtract_ranges_Urange = ->\n  super_rng   = new Urange [ 1, 100, ]\n  blue_rng    = new Urange [ 13, 13, ], [ 8, 8, ], ( new Urange [ 60, 80, ] )\n  info ( CND.truth super_rng  instanceof Urange ), super_rng\n  info ( CND.truth blue_rng   instanceof Urange ), blue_rng\n  blue_rng    = blue_rng.union new Urange [ 81, 81, ]\n  blue_rng    = blue_rng.union new Urange [ 27, 55, ]\n  blue_rng    = blue_rng.union [ 27, 55, ]\n  help '^3332^', @ranges_from_urange blue_rng\n  red_rng     = ( new Urange super_rng )\n  red_rng     = red_rng.difference blue_rng\n  help '^556^', @ranges_from_urange red_rng\n  help '^556^', red_rng.length\n  info '^334^', @numbers_from_urange red_rng\n\n#-----------------------------------------------------------------------------------------------------------\n@demo_merge_ranges = ->\n  ranges = [\n    [ 10, 20, ]\n    [ 15, 30, ]\n    [ 30, 32, ]\n    [ 42, 42, ]\n    [ 88, 99, ]\n    ]\n  a = merge_ranges ranges\n  b = @ranges_from_urange new Urange ranges...\n  info 'merging:', a\n  info 'merging:', b\n  validate.true CND.equals a, b\n\n# #-----------------------------------------------------------------------------------------------------------\n# module.exports = { Urange, }\n\n############################################################################################################\nif module is require.main then do =>\n  await @demo_subtract_ranges_DRange()\n  await @demo_subtract_ranges_Urange()\n  await @demo_merge_ranges()\n\n\n\n"
  ]
}