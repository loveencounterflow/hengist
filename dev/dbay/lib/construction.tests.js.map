{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/construction.tests.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'DBAY/TESTS/CONSTRUCTION'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\ntest                      = require '../../../apps/guy-test'\nPATH                      = require 'path'\nH                         = require './helpers'\ntypes                     = new ( require 'intertype' ).Intertype\n{ isa\n  type_of\n  validate\n  validate_list_of }      = types.export()\nSQL                       = String.raw\nguy                       = require '../../../apps/guy'\n\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBAY constructor arguments 1\" ] = ( T, done ) ->\n  { Dbay }           = require H.dbay_path\n  class Dbay2 extends Dbay\n    @_rnd_int_cfg: true\n  #.........................................................................................................\n  probes_and_matchers = [\n    #-------------------------------------------------------------------------------------------------------\n    [ { ram: false,  path: null,      dbnick: null,     }, null, \"missing argument `path`\",              ] ### 5  ###\n    [ { ram: false,  path: null,      dbnick: 'dbnick', }, null, \"missing argument `path`\",              ] ### 6  ###\n    [ { ram: null,   path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 4  ###\n    [ { ram: false,  path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 8  ###\n    #.......................................................................................................\n    [ { ram: null,   path: null,      dbnick: null,     }, { ram: true,                   dbnick: '_6200294332',  url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 1  ###\n    [ { ram: null,   path: null,      dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',       url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 2  ###\n    [ { ram: null,   path: 'db/path', dbnick: null      }, { ram: false, path: 'db/path',                                        }, null, ] ### 3  ###\n    [ { ram: false,  path: 'db/path', dbnick: null,     }, { ram: false, path: 'db/path',                                        }, null, ] ### 7  ###\n    [ { ram: true,   path: null,      dbnick: null,     }, { ram: true,                   dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 9  ###\n    [ { ram: true,   path: null,      dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 10 ###\n    [ { ram: true,   path: 'db/path', dbnick: null,     }, { ram: true,  path: 'db/path', dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 11 ###\n    [ { ram: true,   path: 'db/path', dbnick: 'dbnick', }, { ram: true,  path: 'db/path', dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 12 ###\n    #-------------------------------------------------------------------------------------------------------\n    null\n    [ { ram: false,     path: undefined, dbnick: undefined,}, null, \"missing argument `path`\",              ] ### 5  ###\n    [ { ram: false,     path: undefined, dbnick: 'dbnick', }, null, \"missing argument `path`\",              ] ### 6  ###\n    [ { ram: undefined, path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 4  ###\n    [ { ram: false,     path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 8  ###\n    #.......................................................................................................\n    [ { ram: undefined, path: undefined, dbnick: undefined,}, { ram: true,                   dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 1  ###\n    [ { ram: undefined, path: undefined, dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 2  ###\n    [ { ram: undefined, path: 'db/path', dbnick: undefined }, { ram: false, path: 'db/path',                                        }, null, ] ### 3  ###\n    [ { ram: false,     path: 'db/path', dbnick: undefined,}, { ram: false, path: 'db/path',                                        }, null, ] ### 7  ###\n    [ { ram: true,      path: undefined, dbnick: undefined,}, { ram: true,                   dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 9  ###\n    [ { ram: true,      path: undefined, dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 10 ###\n    [ { ram: true,      path: 'db/path', dbnick: undefined,}, { ram: true,  path: 'db/path', dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 11 ###\n    [ { ram: true,      path: 'db/path', dbnick: 'dbnick', }, { ram: true,  path: 'db/path', dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 12 ###\n    #-------------------------------------------------------------------------------------------------------\n    null\n    [ { ram: false,                                        }, null, \"missing argument `path`\",              ] ### 5  ###\n    [ { ram: false,                      dbnick: 'dbnick', }, null, \"missing argument `path`\",              ] ### 6  ###\n    [ {                 path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 4  ###\n    [ { ram: false,     path: 'db/path', dbnick: 'dbnick', }, null, \"only RAM DB can have both `path` and `dbnick`\", ] ### 8  ###\n    #.......................................................................................................\n    [ null,                                                   { ram: true,                   dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 1  ###\n    [ {                                  dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 2  ###\n    [ {                 path: 'db/path',                   }, { ram: false, path: 'db/path',                                        }, null, ] ### 3  ###\n    [ { ram: false,     path: 'db/path',                   }, { ram: false, path: 'db/path',                                        }, null, ] ### 7  ###\n    [ { ram: true,                                         }, { ram: true,                   dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 9  ###\n    [ { ram: true,                       dbnick: 'dbnick', }, { ram: true,                   dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 10 ###\n    [ { ram: true,      path: 'db/path',                   }, { ram: true,  path: 'db/path', dbnick: '_6200294332', url: 'file:_6200294332?mode=memory&cache=shared', }, null, ] ### 11 ###\n    [ { ram: true,      path: 'db/path', dbnick: 'dbnick', }, { ram: true,  path: 'db/path', dbnick: 'dbnick',      url: 'file:dbnick?mode=memory&cache=shared', }, null, ] ### 12 ###\n    ]\n  #.........................................................................................................\n  for x in probes_and_matchers\n    if x is null\n      whisper '-'.repeat 108\n      continue\n    [ probe, matcher, error, ] = x\n    await T.perform probe, matcher, error, -> return new Promise ( resolve, reject ) ->\n      do =>\n        result = { ( new Dbay2 probe ).cfg..., }\n        for k of result\n          delete result[ k ] unless k in [ 'ram', 'path', 'dbnick', 'url', ]\n        # resolve result\n        resolve result\n      return null\n  #.........................................................................................................\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBAY: _get_connection_url()\" ] = ( T, done ) ->\n  # T?.halt_on_error()\n  { Dbay }               = require H.dbay_path\n  #.........................................................................................................\n  class Dbay2 extends Dbay\n    @_rnd_int_cfg: true\n  #.........................................................................................................\n  db = new Dbay2 { ram: null, }\n  # T?.eq db._get_connection_url(), { url: 'file:_6200294332?mode=memory&cache=shared', dbnick: '_6200294332' }\n  # T?.eq db._get_connection_url(), { url: 'file:_4260041910?mode=memory&cache=shared', dbnick: '_4260041910' }\n  # T?.eq db._get_connection_url(), { url: 'file:_9982321802?mode=memory&cache=shared', dbnick: '_9982321802' }\n  # T?.eq db._get_connection_url(), { url: 'file:_2420402559?mode=memory&cache=shared', dbnick: '_2420402559' }\n  # T?.eq db._get_connection_url(), { url: 'file:_1965667491?mode=memory&cache=shared', dbnick: '_1965667491' }\n  # T?.eq ( db._get_connection_url 'yournamehere' ), { url: 'file:yournamehere?mode=memory&cache=shared', dbnick: 'yournamehere' }\n  # #.........................................................................................................\n  # info db._get_connection_url()\n  # info db._get_connection_url 'yournamehere'\n  done?()\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBAY instance has two connections\" ] = ( T, done ) ->\n  { Dbay }        = require H.dbay_path\n  Sqlt            = require PATH.join H.dbay_path, 'node_modules/better-sqlite3'\n  bsqlite_class   = Sqlt().constructor\n  dbay = new Dbay()\n  T?.ok dbay.sqlt1.constructor is bsqlite_class\n  T?.ok dbay.sqlt2.constructor is bsqlite_class\n  done?()\n\n# #-----------------------------------------------------------------------------------------------------------\n# @[ \"DBAY attach memory connections\" ] = ( T, done ) ->\n#   ### thx to https://github.com/JoshuaWise/better-sqlite3/issues/102#issuecomment-445606946 ###\n#   # bsqlite_path    = PATH.resolve PATH.join H.dbay_path, 'node_modules/better-sqlite3'\n#   bsqlite_path    = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3'\n#   wrapper_path    = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3/lib/methods/wrappers.js'\n#   bindings_path   = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/bindings'\n#   node_path_1     = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3/build/Release/better_sqlite3.node'\n#   node_path_2     = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3/build/Release/obj.target/better_sqlite3.node'\n#   # bsqlite_path    = require.resolve 'better-sqlite3'\n#   debug '^2233^', \"path to better-sqlite3:\", bsqlite_path\n#   Sqlt            = require bsqlite_path\n#   sqlt            = Sqlt ':memory:'\n#   # wrapper         = require wrapper_path\n#   debug '^290-1^', ( k for k of sqlt._wrappers )\n#   # debug '^290-2^', sqlt._wrappers.getters.open\n#   # debug '^290-3^', sqlt._wrappers.unsafeMode()\n#   # debug '^290-3^', sqlt._wrappers.exec()\n#   debug '^290-3^', sqlt._wrappers.get_cppdb()\n#   # { Database: CPPDatabase, setErrorConstructor, }\n#   debug '^490^', bindings = require bindings_path\n#   debug '^490^', node_path_1\n#   debug '^490^', node_path_2\n#   debug '^490^', { Database: Db1, } = require node_path_1\n#   debug '^490^', { Database: Db2, } = require node_path_2\n#   # new CPPDatabase(filename, filenameGiven, anonymous, readonly, fileMustExist, timeout, verbose || null, buffer || null)\n#   debug '^490^', db1 = new Db1 ':memory:', ':memory:', true, false, false, 5000, null, null\n#   debug '^490^', db1a = new Db1 'file:your_db_name_here?mode=memory&cache=shared', 'file:your_db_name_here?mode=memory&cache=shared', true, false, false, 5000, null, null\n#   debug '^490^', db1b = new Db1 'file:your_db_name_here?mode=memory&cache=shared', 'file:your_db_name_here?mode=memory&cache=shared', true, false, false, 5000, null, null\n#   db1a.exec SQL\"create table x ( n text );\"\n#   db1b.exec SQL\"insert into x ( n ) values ( 'helo world' );\"\n#   select = db1b.prepare SQL\"select * from x;\", {}, false\n#   debug '^340^', select.run()\n#   for row from select.iterate()\n#     info row\n#   # debug '^490^', bindings node_path_1\n#   # debug '^490^', bindings node_path_2\n#   #---------------------------------------------------------------------------------------------------------\n#   return done?()\n#   # debug db = Sqlt ':memory:'\n#   { template_path\n#     work_path }     = await H.procure_db { size: 'small', ref: 'F-open', reuse: true, }\n#   name_as_url = ( name ) ->\n#     # This function is defined here: https://www.sqlite.org/uri.html#the_uri_path\n#     name_u = name\n#     name_u = name_u.replace /#/g, '%23'\n#     name_u = name_u.replace /\\?/g, '%3f'\n#     name_u = name_u.replace /\\/\\/+/g, '/'\n#     return \"file:#{name_u}?mode=memory&cache=shared';\"\n#   foo_path  = work_path\n#   db_foo    = Sqlt foo_path\n#   debug '^554^', db_foo\n#   debug '^554^', foo_path\n#   db_bar    = Sqlt ':memory:' # , { memory: true }\n#   url       = name_as_url 'bar'\n#   debug '^3344^', { url, }\n#   attach    = db_foo.prepare SQL\"attach database $url as bar\"\n#   attach.run { url, }\n#   done?()\n\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"DBAY attach memory connections\" ] = ( T, done ) ->\n  ### TAINT consider to use `bindings` module to automate finding the `better-sqlite3.node` file ###\n  # bsqlite_path    = PATH.resolve PATH.join H.dbay_path, 'node_modules/better-sqlite3'\n  # bsqlite_path    = require.resolve 'better-sqlite3'\n  # bsqlite_path    = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3'\n  # debug '^2233^', \"path to better-sqlite3:\", bsqlite_path\n  ### NOTE files at node_path_1, node_path_2 identical (?) ###\n  node_path_1     = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3/build/Release/better_sqlite3.node'\n  # node_path_2     = PATH.resolve PATH.join __dirname, '../../../apps/icql-dba/node_modules/better-sqlite3/build/Release/obj.target/better_sqlite3.node'\n  debug '^490^', { Database: Db1, } = require node_path_1\n  # debug '^490^', bindings node_path_1\n  # new CPPDatabase(\n  #---------------------------------------------------------------------------------------------------------\n  new_connection = ( path_or_url ) ->\n    cfg =\n      filename:       path_or_url\n      filenameGiven:  path_or_url\n      anonymous:      true        ### ??? ###\n      readonly:       false\n      fileMustExist:  false\n      timeout:        5000\n      verbose:        null\n      buffer:         null\n    return new Db1 cfg.filename, cfg.filenameGiven, cfg.anonymous, cfg.readonly, \\\n      cfg.fileMustExist, cfg.timeout, cfg.verbose, cfg.buffer\n  #---------------------------------------------------------------------------------------------------------\n  debug '^490^', sqlt1 = new_connection 'file:your_db_name_here?mode=memory&cache=shared'\n  debug '^490^', sqlt2 = new_connection 'file:your_db_name_here?mode=memory&cache=shared'\n  sqlt1.exec SQL\"create table x ( n text );\"\n  sqlt2.exec SQL\"insert into x ( n ) values ( 'helo world' );\"\n  select = sqlt2.prepare SQL\"select * from x;\", {}, false\n  debug '^340^', select.run()\n  for row from select.iterate()\n    info row\n  #---------------------------------------------------------------------------------------------------------\n  return done?()\n\n\n\n############################################################################################################\nif require.main is module then do =>\n  # test @\n  # test @[ \"DBAY attach memory connections\" ]\n  @[ \"DBAY attach memory connections\" ]()\n  # test @[ \"DBAY constructor arguments 1\" ]\n  # test @[ \"DBAY: _get_connection_url()\" ]\n  # test @[ \"DBAY instance has two connections\" ]\n\n\n"
  ]
}