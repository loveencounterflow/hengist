<!doctype html>


<title><mrg:loc#title_page/> — SVG with glyph outlines</title>
<link rel="icon" href="<mrg:loc#favicon_data/>" sizes="any"><!-- 32×32 -->

<script src='<mrg:loc#mudom_data/>'></script>
<script>
  globalThis.µ  = require( 'mudom' );
  µ.DOM.ready( function(){
    µ.body          = µ.DOM.select_first( 'body'                );
    } );
  </script>

<style>

  @font-face {
    font-family:            'drb-ui';
    src:                    url( '<mrg:loc#ui_font_data/>' );
    unicode-range:          U+00000-10ffff; }

  body {
    font-family:            'drb-ui';
    background-color:       #96f0c93b;
    padding:                10mm;
    caret-color:            red; }

  scalingwrap {
    display:                block;
    transform-origin:       0px 0px 0px;
    transform:              scale(1.4157,1.4157); }

  toolbox {
    display:                block;
    z-index:                100;
    border:                 1px solid black;
    opacity:                0.5;
    transition:             opacity 0.25s ease-in-out;
    background-color:       white;
    padding:                2mm;
    border-radius:          2mm;
    position:               fixed;
    top:                    5mm;
    left:                   5mm; }

  toolbox:hover {
    transition:             opacity 0.25s ease-in-out;
    opacity:                1; }

  toolbox button {
    background-color:       whitesmoke;
    font-family:            'drb-ui';
    font-size:              3mm; }

  .shady {
    fill:                   blue;
    opacity:                0.5; }

  .reveal-blocks .galley {                      /* debugging */
    outline:                1px dotted blue;
    overflow:               visible; }

  .galley.A4 {
    width:                  210mm;
    height:                 297mm; }

  .svg-font {
    display:                none; }

  .svg-grid,
  #x-cm-grid {
    display:                none; }

  .show-grid #x-cm-grid {
    opacity:                0.5;
    display:                block; }

  .typeframe {
    opacity:                50%;
    stroke:                 blue;
    stroke-width:           10mm;
    fill:                   white; }

  .fontmetric {
    mix-blend-mode:         multiply;
    fill:                   #f008; }

  .fontmetric.missing1 rect,
  .fontmetric.missing2 rect {
    rx:                     25mm; }

  .show-grid    toolbox button.grid     { background-color: yellow; }
  .show-text    toolbox button.text     { background-color: yellow; }
  .show-shy     toolbox button.shy      { background-color: yellow; }
  .show-wbr     toolbox button.wbr      { background-color: yellow; }
  .show-ignored toolbox button.ignored  { background-color: yellow; }

  svg use.shy     { display: none; } .show-shy     svg use.shy { display: inline; }
  svg use.wbr     { display: none; } .show-wbr     svg use.wbr { display: inline; }
  svg use.ignored { display: none; } .show-ignored svg use.ignored { display: inline; }


  remarks {
    font-family:            'drb-ui';
    display:                block;
    background-color:       #345;
    color:                  white;
    padding:                1em;
    margin-top:             1em;
    margin-bottom:          1em;
    width:                  210mm;
    box-sizing:             border-box; }

  .glyfbox {
    fill:                   brown;
    opacity:                0.5;
    mix-blend-mode:         multiply;
    stroke:                 red;
    stroke-width:           5mm; }

  .missing {
    opacity:                0.75;
    fill:                   fuchsia;
    mix-blend-mode:         multiply; }

  text.missing-chrs {
    opacity:                0.75; }

  textcontainer {
    display:                none;
    position:               absolute;
    width:                  210mm;
    height:                 297mm;
    outline:                1px dotted fuchsia;
    font-size:              10mm;
    line-height:            10mm; }

  .show-text textcontainer {
    display:                block; }

  textcontainer div {
    position:               absolute;
    color:                  transparent;
    color:  fuchsia; }

  svg text,
  h1,
  remarks {
    user-select:            none; }

  .glyfgridgid {
    font-size:              100mm; /* to be scaled */
    fill:                   red; }

  svg .column {
    mix-blend-mode:         multiply;
    fill:                   #fff; }

  .reveal-blocks svg .column {
    vector-effect:          non-scaling-stroke;
    stroke:                 red;
    stroke-width:           1px; }

  .reveal-blocks svg .baseline {
    vector-effect:          non-scaling-stroke;
    stroke:                 blue;
    stroke-width:           1px; }


  </style>

<!-- <body> -->
<body class='reveal-blocks show-grid show-shy show-wbr show-hhy show-ignored show-text'>
<toolbox>
  <button class=grid    onclick="µ.DOM.toggle_class( µ.body, 'show-grid'    );">grid</button>
  <button class=text    onclick="µ.DOM.toggle_class( µ.body, 'show-text'    );">text</button>
  <button class=shy     onclick="µ.DOM.toggle_class( µ.body, 'show-shy'     );">shy</button>
  <button class=wbr     onclick="µ.DOM.toggle_class( µ.body, 'show-wbr'     );">wbr</button>
  <button class=ignored onclick="µ.DOM.toggle_class( µ.body, 'show-ignored' );">ignored</button>
  </toolbox>
<svg id='outlines' class='svg-font' viewBox='0 0 1000 1000' overflow='visible'>
<mrg:loc#outlines/>
</svg>


<!-- All elements with `position: fixed` must be placed outside of the scalingwrape as it
  uses a CSS `transform` for scaling which creates a new positioning context and thus interferes
  with `position: fixed`. -->
<scalingwrap id='scalingwrap'>
<mrg:loc#grid/>

<!-- =================================================================================================== -->
<!-- Part I where we declare one outline per font and glyf -->
<!-- Outlines are defined in an em square of 1000⨉1000 units -->
<!-- Only integer numbers are used in outlines so a 1cm high glyf has a precision of 0.01mm -->
<!-- and a 10cm high glyf still has a precision of 0.1mm, which should be good enough. -->
<!-- <path id='o74lmc' d='M839-18C839-31 ...'/> -->
<h1><mrg:loc#title_heading/></h1>

<remarks><mrg:loc#remarks/></remarks>

<!-- =================================================================================================== -->
<!-- Part II where we position and style the scaled outlines to construct the page to be printed. -->
<!-- Coordinates have a pleasant ratio of 1 unit per mm. -->
<!-- <use x='000' y='020' href='#o74lmc'/> -->
<textcontainer><mrg:loc#textcontainer/></textcontainer>
<!-- <svg id=p0001 class='galley superlong' viewBox='0 0 210 2297'> -->
<svg id='p1' class='galley A4' viewBox='0 0 210 297'>
<use id='x-cm-grid' x='000' y='000' href='#cm-grid'/>
<!-- <rect style='width:10mm;height:10mm;fill:deepskyblue;'/> -->
<g id='p1c1-g' class='column'>
  <rect id='p1c1-r' class='column' x='10' y='10' width='90' height='50'/>
    <mrg:loc#TMP-baselines/>
<!--   <g id='p1c1b1-g' transform='translate(10,40) rotate(-14) scale(0.0100)'>
    <line id='p1c1b1-l' class='baseline' x1='0' y1='0' x2='10000' y2='0'/></g> -->
  </g>
<mrg:loc#content/>
</svg>
</scalingwrap>

</body>
